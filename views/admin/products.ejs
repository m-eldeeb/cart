<%- include('../layouts/adminheader.ejs') -%>

<h2 class="page-title mb-3">Products</h2>
<div class="top">

  <a href="/admin/products/add-product" class="btn btn-primary"
    >Add a new product</a
  >
</div>

<br />
<% if (count > 0) { %>
<table class="table">
  <thead>
    <tr>
      <th scope="col">#ID</th>
      <th scope="col">Product</th>
      <th scope="col">Price</th>
      <th scope="col">Category</th>
      <th scope="col">image</th>
      <th scope="col">Options</th>
    </tr>
  </thead>
  <tbody>
    <% products.forEach(function(product,index){ %>
    <tr>
      <td><%= index +1 %></td>
      <td><%= product.title %></td>
      <td>$<%= parseFloat(product.price).toFixed(2) %></td>
      <td><%= product.category %></td>
      <td>
        <% if (product.image == "") { %>
        <img id="noimage" src="/images/noimage.jpg" />
        <% } else {%>
        <img
          class="product-image"
          src="/product_images/<%= product._id %>/<%= product.image %>"
        />
        <% }%>
      </td>
      <td>
        <a
          class="btn btn-primary"
          href="/admin/products/edit-product/<%= product._id %>"
          >Edit</a
        >
        <a
          id="confirm"
          class="confirm btn btn-danger"
          href="/admin/products/delete-product/<%= product._id %>"
          >Delete</a
        >
      </td>
    </tr>
    <% }); %>
  </tbody>
</table>
<% } else {%>
<h3 class="text-center">There are no products.</h3>
<% }%> <%-include('../layouts/adminfooter.ejs') -%>
